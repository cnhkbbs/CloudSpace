var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{r as n,c as r,o as f,a as c,b as d,d as u,n as p,t as m,e as v,f as y,g as w,T as b,w as g,F as h,h as k,i as x,j}from"./vendor.7aafc8bb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const T={id:"app"},P={class:"path-nav animate-card"},C={class:"file-list animate-card"},O=["data-index"],L=["onClick"],B={class:"file-icon"},E={class:"filename"},$={class:"file-meta"},_={class:"meta-item"},z={class:"meta-item"},F={class:"file-actions"},N=["onClick"],S=["onClick"],X={key:1,class:"description-tooltip"};j({__name:"App",setup(e){const j=n([]),A=n(""),I=n(!0),K=n(!1),M=n("根目录"),U=n(!1),q=n("");let D=null;const G=n(!1),H=n(!1),J=r((()=>H.value?[]:R.value));f((async()=>{try{const e=await c.get("https://cnhkbbs.github.io/jstools/cloudspace/filelist.json");D=e.data.directory,Q(),A.value=D.announcement,setTimeout((()=>{K.value=!0,setTimeout((()=>{I.value=!1}),1e3)}),1e4)}catch(e){console.error("Error fetching data:",e)}}));const Q=async()=>{await new Promise((e=>setTimeout(e,100)));let e=D;if("根目录"!==M.value){const a=M.value.split("/");for(const t of a.slice(1))e=e.subdirectories.find((e=>e.name===t))}j.value=[...e.subdirectories.map((e=>({filename:e.name,type:"folder"}))),...e.files.map((e=>{return n=((e,a)=>{for(var t in a||(a={}))i.call(a,t)&&s(e,t,a[t]);if(o)for(var t of o(a))l.call(a,t)&&s(e,t,a[t]);return e})({},e),r={type:"file",extension:e.filename.split(".").pop(),link:e.downloadUrl},a(n,t(r));var n,r}))]},R=r((()=>j.value.sort(((e,a)=>"folder"===e.type?-1:1)))),V=e=>{e.style.opacity="0",e.style.transform="translateX(30px)"},W=(e,a)=>{const t=50*e.dataset.index;setTimeout((()=>{e.style.transition="all 0.3s ease",e.style.opacity="1",e.style.transform="translateX(0)"}),t),setTimeout(a,t+300)},Y=(e,a)=>{G.value?a():(e.style.transition="all 0.3s ease",e.style.opacity="0",e.style.transform="translateX(-30px)",setTimeout(a,300))},Z=e=>{e.style.position="absolute",e.style.width="100%"},ee=async()=>{if(!M.value.includes("/"))return;H.value=!0,await new Promise((e=>setTimeout(e,100)));const e=M.value.split("/");e.pop(),M.value=e.join("/"),await Q(),await new Promise((e=>setTimeout(e,50))),H.value=!1},ae={txt:"fa fa-file-text-o",doc:"fa fa-file-word-o",docx:"fa fa-file-word-o",pdf:"fa fa-file-pdf-o",md:"fa fa-file-text-o",jpg:"fa fa-file-image-o",jpeg:"fa fa-file-image-o",png:"fa fa-file-image-o",gif:"fa fa-file-image-o",webp:"fa fa-file-image-o",zip:"fa fa-file-archive-o",rar:"fa fa-file-archive-o","7z":"fa fa-file-archive-o",mp3:"fa fa-file-audio-o",wav:"fa fa-file-audio-o",mp4:"fa fa-file-video-o",avi:"fa fa-file-video-o",js:"fa fa-file-code-o",css:"fa fa-file-code-o",html:"fa fa-file-code-o",json:"fa fa-file-code-o",py:"fa fa-file-code-o",xls:"fa fa-file-excel-o",xlsx:"fa fa-file-excel-o",ppt:"fa fa-file-powerpoint-o",pptx:"fa fa-file-powerpoint-o"},te=e=>{if("folder"===e.type)return"fa fa-folder";const a=e.filename.split(".").pop().toLowerCase();return ae[a]||"fa fa-file-o"};return(e,a)=>(d(),u("div",T,[I.value?(d(),u("div",{key:0,class:p(["announcement",{"fade-out":K.value}])},m(A.value),3)):v("",!0),a[3]||(a[3]=y("div",{class:"header animate-card"},[y("span",null,"Cloud Space"),y("i",{class:"fa fa-hdd-o"})],-1)),y("div",P,[y("span",null,m(M.value),1)]),y("div",C,[w(b,{name:"list",css:!1,onBeforeEnter:V,onEnter:W,onLeave:Y,onBeforeLeave:Z,tag:"div",class:p({switching:H.value})},{default:g((()=>["根目录"===M.value||H.value?v("",!0):(d(),u("div",{class:"file-item back-item",onClick:ee,key:"back"},a[0]||(a[0]=[y("i",{class:"fa fa-arrow-up"},null,-1),y("span",null,"返回上一级",-1)]))),(d(!0),u(h,null,k(J.value,((e,t)=>{return d(),u("div",{class:"file-item",key:e.filename+M.value,"data-index":t},[y("div",{class:"file-info",onClick:a=>"folder"===e.type?(async e=>{H.value=!0,await new Promise((e=>setTimeout(e,100))),M.value+=`/${e.filename}`,await Q(),await new Promise((e=>setTimeout(e,50))),H.value=!1})(e):null},[y("div",B,[y("i",{class:p(te(e))},null,2)]),y("div",E,m(e.filename),1)],8,L),y("div",$,[y("div",_,m("folder"===e.type?"目录":e.extension.toUpperCase()),1),y("div",z,m("folder"===e.type?"":(o=e.size,o<1024?`${o} B`:o<1048576?`${(o/1024).toFixed(2)} KB`:`${(o/1048576).toFixed(2)} MB`)),1)]),y("div",F,["folder"!==e.type?(d(),u(h,{key:0},[y("button",{class:"action-btn",onClick:x((a=>{var t;(t=e.link)?navigator.clipboard.writeText(t).then((()=>{console.log("链接已复制")})).catch((e=>{console.error("复制失败:",e)})):console.error("链接为空")}),["stop"]),title:"复制链接"},a[1]||(a[1]=[y("i",{class:"fa fa-link"},null,-1)]),8,N),y("button",{class:"action-btn",onClick:x((a=>{var t;(t=e.link)?window.open(t,"_blank"):console.error("下载链接为空")}),["stop"]),title:"下载"},a[2]||(a[2]=[y("i",{class:"fa fa-download"},null,-1)]),8,S)],64)):v("",!0)])],8,O);var o})),128))])),_:1},8,["class"])]),U.value?(d(),u("div",X,m(q.value),1)):v("",!0)]))}}).mount("#app");
